<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: black;
        }
        canvas {
            border: 2px solid white;
        }
    </style>
</head>
<body>
    <script>
        const canvas = document.createElement('canvas');
        document.body.appendChild(canvas);
        const ctx = canvas.getContext('2d');

        // Screen dimensions
        const WIDTH = 800;
        const HEIGHT = 600;
        canvas.width = WIDTH;
        canvas.height = HEIGHT;

        // Colors
        const RAINBOW_COLORS = [
            'red',
            'orange',
            'yellow',
            'green',
            'blue',
            'indigo',
            'violet'
        ];

        // Paddle settings
        const PADDLE_WIDTH = 20;
        const PADDLE_HEIGHT = 100;
        const PADDLE_SPEED = 6;

        // Ball settings
        const BALL_SIZE = 20;
        const BALL_SPEED = 3.5;

        // Player positions
        let player1Y = HEIGHT / 2 - PADDLE_HEIGHT / 2;
        let player2Y = HEIGHT / 2 - PADDLE_HEIGHT / 2;

        // Ball position
        let ballX = WIDTH / 2;
        let ballY = HEIGHT / 2;
        let ballDX = BALL_SPEED * (Math.random() > 0.5 ? 1 : -1);
        let ballDY = BALL_SPEED * (Math.random() > 0.5 ? 1 : -1);

        // Scores
        let player1Score = 0;
        let player2Score = 0;

        // Key states
        let keys = {};
        window.addEventListener('keydown', (e) => keys[e.key] = true);
        window.addEventListener('keyup', (e) => keys[e.key] = false);

        let colorIndex = 0;

        function countdown(start, callback) {
            let count = start;
            function drawCountdown() {
                ctx.fillStyle = 'black';
                ctx.fillRect(0, 0, WIDTH, HEIGHT);
                ctx.fillStyle = 'white';
                ctx.font = '72px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(count, WIDTH / 2, HEIGHT / 2);
                if (count > 0) {
                    count--;
                    setTimeout(drawCountdown, 1000);
                } else {
                    callback();
                }
            }
            drawCountdown();
        }

        function gameLoop() {
            // Player 1 movement
            if (keys['w'] && player1Y > 0) {
                player1Y -= PADDLE_SPEED;
            }
            if (keys['s'] && player1Y < HEIGHT - PADDLE_HEIGHT) {
                player1Y += PADDLE_SPEED;
            }

            // Player 2 movement
            if (keys['ArrowUp'] && player2Y > 0) {
                player2Y -= PADDLE_SPEED;
            }
            if (keys['ArrowDown'] && player2Y < HEIGHT - PADDLE_HEIGHT) {
                player2Y += PADDLE_SPEED;
            }

            // Ball movement
            ballX += ballDX;
            ballY += ballDY;

            // Ball collision with top and bottom walls
            if (ballY <= 0 || ballY >= HEIGHT - BALL_SIZE) {
                ballDY *= -1;
            }

            // Ball collision with paddles
            if (ballX < 50 + PADDLE_WIDTH && ballX > 50 && ballY > player1Y && ballY < player1Y + PADDLE_HEIGHT) {
                ballDX *= -1;
                ballX = 50 + PADDLE_WIDTH;
            }
            if (ballX > WIDTH - 50 - PADDLE_WIDTH - BALL_SIZE && ballX < WIDTH - 50 && ballY > player2Y && ballY < player2Y + PADDLE_HEIGHT) {
                ballDX *= -1;
                ballX = WIDTH - 50 - PADDLE_WIDTH - BALL_SIZE;
            }

            // Ball out of bounds
            if (ballX < 0) {
                player2Score++;
                resetBall();
            }
            if (ballX > WIDTH) {
                player1Score++;
                resetBall();
            }

            // Draw everything
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, WIDTH, HEIGHT);

            colorIndex = (colorIndex + 1) % RAINBOW_COLORS.length;
            const paddleColor = RAINBOW_COLORS[colorIndex];
            const ballColor = RAINBOW_COLORS[(colorIndex + 3) % RAINBOW_COLORS.length];

            // Draw paddles
            ctx.fillStyle = paddleColor;
            ctx.fillRect(50, player1Y, PADDLE_WIDTH, PADDLE_HEIGHT);
            ctx.fillRect(WIDTH - 50 - PADDLE_WIDTH, player2Y, PADDLE_WIDTH, PADDLE_HEIGHT);

            // Draw ball
            ctx.fillStyle = ballColor;
            ctx.fillRect(ballX, ballY, BALL_SIZE, BALL_SIZE);

            // Draw scores
            // Something
            ctx.fillStyle = 'white';
            ctx.font = '36px Arial';
            ctx.fillText(player1Score, WIDTH / 4, 50);
            ctx.fillText(player2Score, (WIDTH * 3) / 4, 50);

            requestAnimationFrame(gameLoop);
        }

        function resetBall() {
            ballX = WIDTH / 2;
            ballY = HEIGHT / 2;
            ballDX = BALL_SPEED * (Math.random() > 0.5 ? 1 : -1);
            ballDY = BALL_SPEED * (Math.random() > 0.5 ? 1 : -1);
        }

        // Start the countdown and game loop
        countdown(3, gameLoop);
    </script>
</body>
</html>
